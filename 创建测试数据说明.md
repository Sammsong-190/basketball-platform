# 创建测试数据说明

## 问题分析

1. **没有商品** - 数据库是空的，需要创建测试商品
2. **发帖子404** - 已创建发帖页面 `/posts/new`

## 解决方案

### 1. 创建测试商品

#### 方法一：通过 API 创建（需要登录为卖家）

```bash
# 1. 先注册一个卖家账号
# 访问: http://localhost:3000/register

# 2. 登录后，通过 API 创建商品
curl -X POST http://localhost:3000/api/products \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "name": "Nike 篮球鞋",
    "description": "专业篮球鞋，舒适透气",
    "price": 599.00,
    "stock": 100,
    "categoryId": "CATEGORY_ID",
    "images": ["https://example.com/shoe.jpg"]
  }'
```

#### 方法二：使用 SQL 直接插入（快速）

```bash
mysql -u root -p522471614s basketball_platform << 'EOF'
-- 先创建分类（如果还没有）
INSERT INTO Category (id, name, description) VALUES 
  ('cat1', '球鞋', '篮球鞋类'),
  ('cat2', '球衣', '篮球服装'),
  ('cat3', '篮球', '篮球用品')
ON DUPLICATE KEY UPDATE name=name;

-- 创建测试用户（卖家）
INSERT INTO User (id, username, email, password, role, isSeller) VALUES 
  ('user1', 'seller1', 'seller1@test.com', '$2a$10$dummy', 'USER', 1)
ON DUPLICATE KEY UPDATE username=username;

-- 创建测试商品
INSERT INTO Product (id, name, description, price, stock, categoryId, sellerId, status, images) VALUES 
  ('prod1', 'Nike 篮球鞋', '专业篮球鞋，舒适透气', 599.00, 100, 'cat1', 'user1', 'ACTIVE', '["https://via.placeholder.com/400"]'),
  ('prod2', 'Adidas 球衣', '透气运动球衣', 299.00, 50, 'cat2', 'user1', 'ACTIVE', '["https://via.placeholder.com/400"]'),
  ('prod3', 'Spalding 篮球', '标准比赛用球', 199.00, 200, 'cat3', 'user1', 'ACTIVE', '["https://via.placeholder.com/400"]')
ON DUPLICATE KEY UPDATE name=name;
EOF
```

### 2. 创建测试帖子

#### 方法一：通过页面创建

1. 访问: http://localhost:3000/posts/new
2. 登录后填写表单
3. 提交（需要管理员审核）

#### 方法二：使用 SQL 直接插入

```bash
mysql -u root -p522471614s basketball_platform << 'EOF'
-- 创建测试用户
INSERT INTO User (id, username, email, password, role) VALUES 
  ('user2', 'testuser', 'test@test.com', '$2a$10$dummy', 'USER')
ON DUPLICATE KEY UPDATE username=username;

-- 创建帖子分类
INSERT INTO PostCategory (id, name, description) VALUES 
  ('postcat1', '赛事讨论', '篮球赛事相关讨论')
ON DUPLICATE KEY UPDATE name=name;

-- 创建测试帖子（已审核）
INSERT INTO Post (id, title, content, authorId, categoryId, status, views, likes) VALUES 
  ('post1', 'NBA 最新战报', '今天湖人队表现精彩...', 'user2', 'postcat1', 'APPROVED', 100, 20),
  ('post2', '篮球技巧分享', '如何提高投篮命中率...', 'user2', 'postcat1', 'APPROVED', 50, 10)
ON DUPLICATE KEY UPDATE title=title;
EOF
```

## 快速创建测试数据脚本

已创建 `创建测试数据.sh` 脚本，运行即可：

```bash
./创建测试数据.sh
```

## 验证数据

```bash
# 查看商品数量
mysql -u root -p522471614s basketball_platform -e "SELECT COUNT(*) FROM Product;"

# 查看帖子数量
mysql -u root -p522471614s basketball_platform -e "SELECT COUNT(*) FROM Post WHERE status='APPROVED';"
```
