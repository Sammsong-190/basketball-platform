# 创建管理员账户说明

## 方法一：使用脚本创建（推荐）

### 步骤：

1. **运行创建管理员脚本**
   ```bash
   node create-admin.js
   ```

2. **默认管理员信息**
   - 用户名: `admin`
   - 邮箱: `admin@example.com`
   - 密码: `admin123456`
   - 角色: `ADMIN`

3. **登录**
   - 访问登录页面：`http://localhost:3000/login`
   - 使用上述用户名和密码登录

4. **修改密码（重要）**
   - 登录后立即修改密码，确保账户安全

---

## 方法二：手动创建（通过注册 + 数据库更新）

### 步骤：

1. **注册普通账户**
   - 访问注册页面：`http://localhost:3000/register`
   - 填写用户名、邮箱、密码等信息
   - 完成注册

2. **更新数据库中的角色**
   
   使用 Prisma Studio：
   ```bash
   npm run db:studio
   ```
   - 打开浏览器访问 Prisma Studio
   - 找到 `User` 表
   - 找到刚注册的用户
   - 将 `role` 字段从 `USER` 改为 `ADMIN`
   - 保存

   或者使用 MySQL 命令行：
   ```sql
   UPDATE User SET role = 'ADMIN' WHERE username = '你的用户名';
   ```

3. **重新登录**
   - 退出当前登录
   - 使用刚才注册的账户重新登录
   - 现在应该可以看到"管理后台"链接了

---

## 方法三：修改现有用户为管理员

如果已经有一个账户，想将其升级为管理员：

### 使用 Prisma Studio：
```bash
npm run db:studio
```
- 找到 `User` 表
- 找到要升级的用户
- 将 `role` 字段改为 `ADMIN`
- 保存

### 使用 MySQL 命令行：
```sql
UPDATE User SET role = 'ADMIN' WHERE username = '你的用户名';
```

### 使用 Node.js 脚本：
创建一个临时脚本 `upgrade-to-admin.js`：
```javascript
const { PrismaClient } = require('@prisma/client')
const prisma = new PrismaClient()

async function upgradeToAdmin() {
  const username = '你的用户名' // 修改为实际用户名
  
  await prisma.user.update({
    where: { username },
    data: { role: 'ADMIN' }
  })
  
  console.log(`✅ ${username} 已升级为管理员`)
  await prisma.$disconnect()
}

upgradeToAdmin()
```

然后运行：
```bash
node upgrade-to-admin.js
```

---

## 验证管理员身份

登录后，如果看到以下内容，说明已经是管理员：

1. ✅ 导航栏显示"管理后台"链接
2. ✅ 个人中心显示"管理员"标签
3. ✅ 可以访问 `/admin` 页面
4. ✅ 可以访问 `/admin/posts` 进行帖子审核

---

## 注意事项

⚠️ **安全提示**：
- 创建管理员后，请立即修改默认密码
- 不要在生产环境中使用默认密码
- 建议使用强密码（至少8位，包含字母和数字）

🔒 **权限说明**：
- 管理员可以审核帖子、管理用户、查看系统日志等
- 管理员账户请妥善保管，不要泄露

---

## 常见问题

**Q: 运行脚本时提示找不到模块？**
A: 确保已安装依赖：`npm install`

**Q: 数据库连接失败？**
A: 检查 `.env` 文件中的 `DATABASE_URL` 是否正确

**Q: 登录后看不到"管理后台"？**
A: 
1. 确认用户角色确实是 `ADMIN`（检查数据库）
2. 退出登录后重新登录
3. 清除浏览器缓存和 localStorage
