# å‰åç«¯åˆ†ç¦»è¿ç§»æŒ‡å—

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ backend/              # åç«¯ API æœåŠ¡å™¨ï¼ˆExpress + TypeScriptï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.ts     # æœåŠ¡å™¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ lib/          # å·¥å…·åº“ï¼ˆprisma, auth, middlewareï¼‰
â”‚   â”‚   â””â”€â”€ routes/       # API è·¯ç”±
â”‚   â”œâ”€â”€ prisma/           # Prisma é…ç½®ï¼ˆå…±äº«ï¼‰
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ frontend/             # å‰ç«¯åº”ç”¨ï¼ˆVite + React + TypeScriptï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx      # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ App.tsx       # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/          # å·¥å…·åº“ï¼ˆAPI å®¢æˆ·ç«¯ï¼‰
â”‚   â”‚   â”œâ”€â”€ components/   # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ pages/        # é¡µé¢
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â””â”€â”€ prisma/               # æ•°æ®åº“é…ç½®ï¼ˆå…±äº«ï¼‰
    â””â”€â”€ schema.prisma
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åç«¯è®¾ç½®

```bash
cd backend
npm install

# å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“å’Œ JWT å¯†é’¥

# ç”Ÿæˆ Prisma Client
npm run db:generate

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

åç«¯å°†åœ¨ `http://localhost:3001` è¿è¡Œ

### 2. å‰ç«¯è®¾ç½®

```bash
cd frontend
npm install

# å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®åç«¯ API åœ°å€

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†åœ¨ `http://localhost:5173` è¿è¡Œ

## ğŸ“ è¿ç§»æ­¥éª¤

### æ­¥éª¤ 1: è¿ç§» API è·¯ç”±

**ä» Next.js API Routes è¿ç§»åˆ° Express è·¯ç”±**

#### Next.js æ ¼å¼ï¼ˆ`app/api/products/route.ts`ï¼‰:
```typescript
export async function GET(request: NextRequest) {
  // ...
  return NextResponse.json({ products })
}
```

#### Express æ ¼å¼ï¼ˆ`backend/src/routes/products.ts`ï¼‰:
```typescript
router.get('/', async (req: Request, res: Response) => {
  // ...
  res.json({ products })
})
```

**éœ€è¦è¿ç§»çš„ API è·¯ç”±ï¼š**
- âœ… `app/api/auth/*` â†’ `backend/src/routes/auth.ts`
- âœ… `app/api/products/*` â†’ `backend/src/routes/products.ts`
- âœ… `app/api/categories/*` â†’ `backend/src/routes/categories.ts`
- â³ `app/api/posts/*` â†’ `backend/src/routes/posts.ts`
- â³ `app/api/comments/*` â†’ `backend/src/routes/comments.ts`
- â³ `app/api/orders/*` â†’ `backend/src/routes/orders.ts`
- â³ `app/api/users/*` â†’ `backend/src/routes/users.ts`
- â³ `app/api/nba/*` â†’ `backend/src/routes/nba.ts`
- â³ `app/api/admin/*` â†’ `backend/src/routes/admin.ts`

### æ­¥éª¤ 2: è¿ç§»ä¸­é—´ä»¶

**ä» Next.js ä¸­é—´ä»¶è¿ç§»åˆ° Express ä¸­é—´ä»¶**

#### Next.js æ ¼å¼:
```typescript
export async function authenticate(request: NextRequest) {
  // ...
  return NextResponse.json({ error: '...' }, { status: 401 })
}
```

#### Express æ ¼å¼:
```typescript
export async function authenticate(req: AuthRequest, res: Response, next: NextFunction) {
  // ...
  return res.status(401).json({ error: '...' })
}
```

### æ­¥éª¤ 3: è¿ç§»å‰ç«¯é¡µé¢

**ä» Next.js Pages è¿ç§»åˆ° React Router**

#### Next.js æ ¼å¼ï¼ˆ`app/products/page.tsx`ï¼‰:
```typescript
'use client'
export default function ProductsPage() {
  // ...
}
```

#### React Router æ ¼å¼ï¼ˆ`frontend/src/pages/Products.tsx`ï¼‰:
```typescript
export default function Products() {
  // ...
}
```

**è·¯ç”±é…ç½®ï¼ˆ`frontend/src/App.tsx`ï¼‰:**
```typescript
<Routes>
  <Route path="/products" element={<Products />} />
</Routes>
```

### æ­¥éª¤ 4: æ›´æ–° API è°ƒç”¨

**ä»ç›¸å¯¹è·¯å¾„æ”¹ä¸ºç»å¯¹è·¯å¾„**

#### Next.js æ ¼å¼:
```typescript
const response = await fetch('/api/products')
```

#### å‰ç«¯æ ¼å¼ï¼ˆä½¿ç”¨ axiosï¼‰:
```typescript
import api from '@/lib/api'
const response = await api.get('/api/products')
```

**æˆ–è€…ä½¿ç”¨ fetch:**
```typescript
const response = await fetch('http://localhost:3001/api/products', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
})
```

### æ­¥éª¤ 5: å¤„ç†è®¤è¯

**Token å­˜å‚¨å’Œå‘é€**

- Token å­˜å‚¨åœ¨ `localStorage`
- é€šè¿‡ `Authorization: Bearer <token>` å¤´å‘é€
- API å®¢æˆ·ç«¯è‡ªåŠ¨å¤„ç†ï¼ˆè§ `frontend/src/lib/api.ts`ï¼‰

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯ç¯å¢ƒå˜é‡ï¼ˆ`backend/.env`ï¼‰

```env
DATABASE_URL="mysql://root:password@localhost:3306/basketball_platform"
JWT_SECRET="your-secret-key"
PORT=3001
FRONTEND_URL="http://localhost:5173"
```

### å‰ç«¯ç¯å¢ƒå˜é‡ï¼ˆ`frontend/.env`ï¼‰

```env
VITE_API_BASE_URL=http://localhost:3001
```

## ğŸ“¦ å…±äº«èµ„æº

### Prisma Schema

Prisma schema å¯ä»¥æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œä¸¤ä¸ªé¡¹ç›®å…±äº«ï¼š

```bash
# åœ¨ backend ä¸­
prisma: {
  schema: "../prisma/schema.prisma"
}

# åœ¨ frontend ä¸­ï¼ˆå¦‚æœéœ€è¦ï¼‰
# é€šå¸¸å‰ç«¯ä¸éœ€è¦ç›´æ¥è®¿é—® Prisma
```

### ç»„ä»¶è¿ç§»

å°† `components/` ç›®å½•ä¸‹çš„ç»„ä»¶è¿ç§»åˆ° `frontend/src/components/`ï¼š

- `Header.tsx` â†’ `frontend/src/components/Header.tsx`
- `AdminNav.tsx` â†’ `frontend/src/components/AdminNav.tsx`
- `NewsCarousel.tsx` â†’ `frontend/src/components/NewsCarousel.tsx`

## ğŸ¯ è¿ç§»æ¸…å•

### åç«¯è¿ç§»
- [x] åˆ›å»º Express æœåŠ¡å™¨åŸºç¡€ç»“æ„
- [x] è¿ç§»è®¤è¯ç›¸å…³ APIï¼ˆlogin, registerï¼‰
- [x] è¿ç§»å•†å“ç›¸å…³ APIï¼ˆproductsï¼‰
- [x] è¿ç§»åˆ†ç±»ç›¸å…³ APIï¼ˆcategoriesï¼‰
- [ ] è¿ç§»å¸–å­ç›¸å…³ APIï¼ˆpostsï¼‰
- [ ] è¿ç§»è¯„è®ºç›¸å…³ APIï¼ˆcommentsï¼‰
- [ ] è¿ç§»è®¢å•ç›¸å…³ APIï¼ˆordersï¼‰
- [ ] è¿ç§»ç”¨æˆ·ç›¸å…³ APIï¼ˆusersï¼‰
- [ ] è¿ç§» NBA æ•°æ® APIï¼ˆnbaï¼‰
- [ ] è¿ç§»ç®¡ç†å‘˜ APIï¼ˆadminï¼‰
- [ ] è¿ç§»è´­ç‰©è½¦ APIï¼ˆcartï¼‰
- [ ] è¿ç§»æ”¯ä»˜ APIï¼ˆpaymentsï¼‰
- [ ] è¿ç§»å”®å APIï¼ˆrefunds, complaintsï¼‰

### å‰ç«¯è¿ç§»
- [x] åˆ›å»º Vite + React åº”ç”¨ç»“æ„
- [x] é…ç½® React Router
- [x] åˆ›å»º API å®¢æˆ·ç«¯
- [ ] è¿ç§»é¦–é¡µï¼ˆ`app/page.tsx`ï¼‰
- [ ] è¿ç§»ç™»å½•é¡µï¼ˆ`app/login/page.tsx`ï¼‰
- [ ] è¿ç§»æ³¨å†Œé¡µï¼ˆ`app/register/page.tsx`ï¼‰
- [ ] è¿ç§»å•†å“åˆ—è¡¨é¡µï¼ˆ`app/products/page.tsx`ï¼‰
- [ ] è¿ç§»å•†å“è¯¦æƒ…é¡µï¼ˆ`app/products/[id]/page.tsx`ï¼‰
- [ ] è¿ç§»å¸–å­åˆ—è¡¨é¡µï¼ˆ`app/posts/page.tsx`ï¼‰
- [ ] è¿ç§»å¸–å­è¯¦æƒ…é¡µï¼ˆ`app/posts/[id]/page.tsx`ï¼‰
- [ ] è¿ç§»ä¸ªäººä¸­å¿ƒï¼ˆ`app/dashboard/page.tsx`ï¼‰
- [ ] è¿ç§»èµ›äº‹èµ„è®¯ï¼ˆ`app/events/page.tsx`ï¼‰
- [ ] è¿ç§»ç®¡ç†å‘˜é¡µé¢ï¼ˆ`app/admin/*`ï¼‰
- [ ] è¿ç§»æ‰€æœ‰ç»„ä»¶ï¼ˆ`components/*`ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### 1. CORS é”™è¯¯

**é—®é¢˜**: å‰ç«¯è¯·æ±‚åç«¯æ—¶å‡ºç° CORS é”™è¯¯

**è§£å†³**: ç¡®ä¿åç«¯ `server.ts` ä¸­é…ç½®äº†æ­£ç¡®çš„ CORSï¼š

```typescript
app.use(cors({
  origin: process.env.FRONTEND_URL || 'http://localhost:5173',
  credentials: true
}))
```

### 2. 404 è·¯ç”±

**é—®é¢˜**: å‰ç«¯è·¯ç”±åˆ·æ–°å 404

**è§£å†³**: é…ç½® Vite å¼€å‘æœåŠ¡å™¨æˆ–ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨ï¼ˆå¦‚ Nginxï¼‰æ”¯æŒ SPA è·¯ç”±

### 3. ç¯å¢ƒå˜é‡æœªåŠ è½½

**é—®é¢˜**: å‰ç«¯æ— æ³•è¯»å–ç¯å¢ƒå˜é‡

**è§£å†³**: Vite ç¯å¢ƒå˜é‡å¿…é¡»ä»¥ `VITE_` å¼€å¤´ï¼Œä¸”éœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨

### 4. Prisma Client æœªç”Ÿæˆ

**é—®é¢˜**: åç«¯æ— æ³•æ‰¾åˆ° Prisma Client

**è§£å†³**: åœ¨ `backend` ç›®å½•è¿è¡Œ `npm run db:generate`

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Express.js å®˜æ–¹æ–‡æ¡£](https://expressjs.com/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [React Router å®˜æ–¹æ–‡æ¡£](https://reactrouter.com/)
- [Axios å®˜æ–¹æ–‡æ¡£](https://axios-http.com/)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“è¿æ¥**: ç¡®ä¿ä¸¤ä¸ªé¡¹ç›®éƒ½èƒ½è®¿é—®åŒä¸€ä¸ªæ•°æ®åº“
2. **ç¯å¢ƒå˜é‡**: ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ° Git
3. **Token å®‰å…¨**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPSï¼Œå¹¶è®¾ç½®åˆç†çš„ Token è¿‡æœŸæ—¶é—´
4. **CORS é…ç½®**: ç”Ÿäº§ç¯å¢ƒé™åˆ¶å…è®¸çš„å‰ç«¯åŸŸå
5. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼

## ğŸ‰ å®Œæˆåçš„ä¼˜åŠ¿

1. **ç‹¬ç«‹éƒ¨ç½²**: å‰åç«¯å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
2. **æŠ€æœ¯æ ˆçµæ´»**: å‰ç«¯å¯ä»¥ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼Œåç«¯å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€
3. **å›¢é˜Ÿåä½œ**: å‰åç«¯å›¢é˜Ÿå¯ä»¥å¹¶è¡Œå¼€å‘
4. **æ€§èƒ½ä¼˜åŒ–**: å‰ç«¯å¯ä»¥éƒ¨ç½²åˆ° CDNï¼Œåç«¯å¯ä»¥æ°´å¹³æ‰©å±•
5. **ç¼“å­˜ç­–ç•¥**: å‰ç«¯é™æ€èµ„æºå¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜
